<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>EM Alan Teorisi Problemleri</title>
  <meta name="description" content="Elektromanyetik Alan Teorisi problem setleri">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <link href="assets/styles.css" rel="stylesheet">
</head>
<body>
  <nav class="navbar navbar-expand-lg bg-body-tertiary border-bottom">
    <div class="container">
      <a class="navbar-brand" href="./">Elektromanyetik Teori I</a>
      <div class="ms-auto small text-secondary">Ali İhsan Çanakoğlu</div>
    </div>
  </nav>

  <main class="container my-4">
    <header class="mb-4">
      <h1 class="h3 mb-2">Elektromanyetik Alan Teorisi Problemleri</h1>
      <p class="text-secondary mb-3">Aşağıdaki problem setlerinden birisini seçebilirsiniz ya da arama yapabilirsiniz.</p>

      <div class="row g-2 align-items-center">
        <div class="col-12 col-md-6">
          <input id="q" type="search" class="form-control" placeholder="Ara: başlık, etiket..." aria-label="Listede ara">
        </div>
        <!--<div class="col-12 col-md-6 text-md-end">
          <a class="btn btn-outline-secondary btn-sm" href="viewer.html?src=problems/p01-maxwell.md">Örnek dosyayı aç</a>
        </div>-->
      </div>
    </header>

    <section>
      <ul id="list" class="list-group"></ul>
      <p id="empty" class="text-secondary mt-3 d-none">Kayıt bulunamadı.</p>
    </section>
  </main>

  <footer class="border-top py-3 mt-5">
    <div class="container small text-secondary">
      © <span id="y"></span> EM Problemleri
    </div>
  </footer>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    const listEl = document.getElementById('list');
    const emptyEl = document.getElementById('empty');
    const q = document.getElementById('q');
    let items = [];

    function normalize(t){ return (t||'').toString().toLocaleLowerCase('tr'); }

    function render(rows){
      listEl.innerHTML = rows.map(r => `
        <li class="list-group-item d-flex justify-content-between align-items-start">
          <div class="ms-0 me-auto">
            <div class="fw-semibold">
              <a class="text-decoration-none" href="viewer.html?src=${encodeURIComponent(r.file)}">${r.title}</a>
            </div>
            <div class="small text-secondary">${r.date || ''}</div>
          </div>
          <div>
            ${(r.tags||[]).map(t => `<span class="badge text-bg-light text-secondary border me-1">${t}</span>`).join('')}
          </div>
        </li>`).join('');
      emptyEl.classList.toggle('d-none', rows.length > 0);
    }

    function applyFilter(){
      const needle = normalize(q.value);
      if(!needle){ render(items); return; }
      const f = items.filter(r => (normalize(r.title) + ' ' + normalize((r.tags||[]).join(' '))).includes(needle));
      render(f);
    }

    q.addEventListener('input', applyFilter);

    fetch('problems.json', {cache:'no-store'})
      .then(r => r.ok ? r.json() : [])
      .then(rows => { items = Array.isArray(rows)? rows : []; render(items); })
      .catch(() => { items = []; render(items); });
  </script>
</body>
</html>